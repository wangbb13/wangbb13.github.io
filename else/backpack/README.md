# 背包问题九讲（学习笔记）

## 01  $01$背包问题

> 问题描述：$N$个物品，每个物品的容积是$c[i]$，价值是$v[i]$，求解将那些物品放入容积为$V​$的背包中使得总价值最大。

求解：

1. 状态转移方程：$f[i][v]=max(f[i-1][v],f[i-1][v-c[i]]+v[i])​$ , 其中 $f[i][v]​$表示前$i​$件物品放入容积为$v​$的背包中的最大价值，$f[N][V]​$即为解。

2. 编程实现：

   1. 二维数组`dp[N][V]`;

   2. 考虑到上述转移方程中只用到了$f[i-1]$的内容，因此可以只使用一个数组`dp[V]`，核心代码如下:

      ```c++
      int dp[V+1] = {0};
      for (int i = 0; i < N; ++i) {
          for (int j = V; j >= c[i]; -- j) {
              dp[j] = max(dp[j], dp[j - c[i]] + v[i]);
          }
      }
      return dp[V];
      ```

      **注意：第二层循环要从大到小，因为要利用$f[i-1]​$，即矩阵中上一行的内容，不能破坏`dp[j]`之前的数据。**

   3. 初始值的设置问题

      1. 无须恰好装满背包：`dp[i]=0`

      2. 必须恰好装满背包：`dp[0]=0,dp[1..V]=`-$\infty$ 如果`dp[V]`最后为负数，则无解

         可以理解如下：初始化数组就是没有放入任何物品时的合法状态，若要求恰好装满，那么只有容积为$0​$的背包可以被价值为$0​$的`NULL`物品装满，而其他容积的背包此时均没有合法的解，因此为$-\infty​$. 实际上设为$-\sum_{i=1}^{N}v[i]-1​$即可。



## 02  完全背包问题

> 问题描述：$N​$种物品，每种物品的容积是$c[i]​$，价值是$v[i]​$，数量无限，求解将那些物品放入容积为$V​$的背包中使得总价值最大。

求解：

1. 朴素地转换为$01$背包问题，每种物品最多出现$V/c[i]$次，进一步改进，将第`i`种物品拆为费用为$c[i]*2^k$，价值为$w[i]*2^k$，其中$c[i]*2^k<=V$.（二进制的思想）。

2. 状态转移方程：$f[i][v]=max(f[i-1][v],f[i][v-c[i]]+v[i])$ ，$f[i][v]$表示前 $i$ 种物品放入容量为 $v$ 的背包的最大价值。核心代码如下：

   ```c++
   for (int i = 0; i < N; ++i) {
       for (int j = c[i]; j <= V; ++ j) {
           dp[j] = max(dp[j], dp[j - c[i]] + v[i]);
       }
   }
   return dp[V];
   ```



## 03  多重背包问题



